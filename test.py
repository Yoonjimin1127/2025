import streamlit as st
import pandas as pd
import matplotlib.pyplot as plt
# -------------------------------
# ìƒ˜í”Œ ìŒì‹ ë°ì´í„°
# -------------------------------
food_data = {
    "ê¹€ë°¥": {"íƒ„ìˆ˜í™”ë¬¼": 45, "ë‹¨ë°±ì§ˆ": 8, "ì§€ë°©": 9},
    "ì¹˜í‚¨": {"íƒ„ìˆ˜í™”ë¬¼": 20, "ë‹¨ë°±ì§ˆ": 25, "ì§€ë°©": 30},
    "ìƒëŸ¬ë“œ": {"íƒ„ìˆ˜í™”ë¬¼": 10, "ë‹¨ë°±ì§ˆ": 5, "ì§€ë°©": 7},
    "ë¼ë©´": {"íƒ„ìˆ˜í™”ë¬¼": 65, "ë‹¨ë°±ì§ˆ": 10, "ì§€ë°©": 15},
    "ë–¡ë³¶ì´": {"íƒ„ìˆ˜í™”ë¬¼": 70, "ë‹¨ë°±ì§ˆ": 7, "ì§€ë°©": 10}
}

# ê±´ê°•ì‹ ì¶”ì²œ ë°ì´í„° (ê°„ë‹¨)
healthy_foods = {
    "íƒ„ìˆ˜í™”ë¬¼": ["ìƒëŸ¬ë“œ", "ë‘ë¶€", "í˜„ë¯¸ë°¥"],
    "ë‹¨ë°±ì§ˆ": ["ë‹­ê°€ìŠ´ì‚´", "ë‹¬ê±€", "ë‘ë¶€"],
    "ì§€ë°©": ["ì•„ëª¬ë“œ", "ì—°ì–´", "ì•„ë³´ì¹´ë„"]
}

# -------------------------------
# Streamlit ì•±
# -------------------------------
st.title("ğŸ¥— ì‹ë‹¨ ê· í˜• ë¶„ì„ê¸°")

menu = st.text_input("ë¨¹ì€ ìŒì‹ì„ ì…ë ¥í•˜ì„¸ìš” (ì˜ˆ: ê¹€ë°¥, ì¹˜í‚¨, ìƒëŸ¬ë“œ, ë¼ë©´, ë–¡ë³¶ì´)")

if menu:
    if menu in food_data:
        nutrients = food_data[menu]
        st.subheader(f"'{menu}'ì˜ ì˜ì–‘ ì„±ë¶„")
        st.write(nutrients)

        # ì°¨íŠ¸
        chart_data = pd.DataFrame({
            "ì˜ì–‘ì†Œ": ["íƒ„ìˆ˜í™”ë¬¼", "ë‹¨ë°±ì§ˆ", "ì§€ë°©"],
            "ê°’": [nutrients["íƒ„ìˆ˜í™”ë¬¼"], nutrients["ë‹¨ë°±ì§ˆ"], nutrients["ì§€ë°©"]]
        })
        st.bar_chart(chart_data.set_index("ì˜ì–‘ì†Œ"))

        # ê°œì„ ì 
        suggestion = ""
        carb, protein, fat = nutrients["íƒ„ìˆ˜í™”ë¬¼"], nutrients["ë‹¨ë°±ì§ˆ"], nutrients["ì§€ë°©"]

        # ê¸°ì¤€: íƒ„:ë‹¨:ì§€ = 50:30:20
        if carb > 60:
            suggestion += "- íƒ„ìˆ˜í™”ë¬¼ì´ ë§ì•„ìš”. ì±„ì†Œë‚˜ ë‹¨ë°±ì§ˆì„ ë” ì¶”ê°€í•´ë³´ì„¸ìš”.\n"
        if protein < 15:
            suggestion += "- ë‹¨ë°±ì§ˆì´ ë¶€ì¡±í•´ìš”. ë‹¬ê±€, ë‘ë¶€, ë‹­ê°€ìŠ´ì‚´ì„ ê³ë“¤ì—¬ ë³´ì„¸ìš”.\n"
        if fat > 25:
            suggestion += "- ì§€ë°©ì´ ë§ì•„ìš”. ê¸°ë¦„ì§„ ìŒì‹ì€ ì¡°ê¸ˆ ì¤„ì´ëŠ” ê²Œ ì¢‹ì•„ìš”.\n"
        if suggestion == "":
            suggestion = "ê· í˜• ì¡íŒ ì‹ë‹¨ì´ì—ìš”! ğŸ‘"

        st.subheader("ê°œì„ í•  ì ")
        st.write(suggestion)

        # ë¹„ìŠ·í•œ ê±´ê°•ì‹ ì¶”ì²œ
        st.subheader("ë¹„ìŠ·í•œ ê±´ê°•ì‹ ì¶”ì²œ")
        for key, foods in healthy_foods.items():
            st.write(f"{key} ë³´ì¶© ì¶”ì²œ: {', '.join(foods)}")

    else:
        st.warning("ë°ì´í„°ì— ì—†ëŠ” ìŒì‹ì´ì—ìš”. (ì˜ˆ: ê¹€ë°¥, ì¹˜í‚¨, ìƒëŸ¬ë“œ, ë¼ë©´, ë–¡ë³¶ì´)")
